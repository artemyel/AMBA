{% extends "base.html" %}

{% load staticfiles %}

{% block references %}
    {{ block.super }}
    <link rel="stylesheet" type="text/css" href="{% static "components/slick/slick.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "components/slick/slick-theme.css" %}">
    <link rel="stylesheet" href="{% static "css/index.css" %}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css" rel="stylesheet"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script>

    <script src="{% static "components/slick/slick.js" %}" type="text/javascript" charset="utf-8"></script>
    <script src="{% static "js/slider.js" %}" type="text/javascript"></script>
    <script>
        function format(response) {
            if (response.loading) return response.text;

            var markup = response.name;
            response.parameters.forEach(function (item) {
                markup += '<div> '+ item.name + ':'+ item.value +'</div>'
            });

            return markup;
        }

        function formatSelection(response) {
            return response.name || response.text;
        }

        $(document).ready(function () {

            $(".js-data-example-ajax").select2({
                ajax: {
                    url: "/main/test_ajax/",
                    dataType: 'json',
                    delay: 250,
                    data: function (params) {
                        return {
                            q: params.term // search term
                        };
                    },
                    processResults: function (data, page) {
                        // parse the results into the format expected by Select2.
                        // since we are using custom formatting functions we do not need to
                        // alter the remote JSON data
                        //alert(data.items);
                        return {
                            results: data.items
                        };
                    },
                    cache: true
                },
                escapeMarkup: function (markup) {
                    return markup;
                }, // let our custom formatter work
                minimumInputLength: 1,
                templateResult: format, // omitted for brevity, see the source of this page
                templateSelection: formatSelection // omitted for brevity, see the source of this page

            });
        });
    </script>
{% endblock %}

{% block content %}
    <div class="container-fluid">
        <div class="row marginContent">
            <div class="col-xs-offset-5 col-xs-2">
                <p class="top">Top E-liquids</p>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-6 col-sm-4 col-md-3">
                <div class="topEliquids">
                    фотка+инфа
                </div>
            </div>
            <div class="col-xs-6 col-sm-4 col-md-3">
                <div class="topEliquids">
                    фотка+инфа
                </div>
            </div>
            <div class="col-xs-6 col-sm-4 col-md-3">
                <div class="topEliquids">
                    фотка+инфа
                </div>
            </div>
            <div class="col-xs-6 col-sm-4 col-md-3">
                <div class="topEliquids">
                    фотка+инфа
                </div>
            </div>
            <div class="col-xs-6 col-sm-4 col-md-3">
                <div class="topEliquids">
                    фотка+инфа
                </div>
            </div>
        </div>


        <div class="row marginContent">
            <div class="col-xs-offset-5 col-xs-2">
                <p class="top">Top Products</p>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-6 col-sm-4 col-md-3">
                <div class="topEliquids">
                    фотка+инфа
                </div>
            </div>
            <div class="col-xs-6 col-sm-4 col-md-3">
                <div class="topEliquids">
                    фотка+инфа
                </div>
            </div>
            <div class="col-xs-6 col-sm-4 col-md-3">
                <div class="topEliquids">
                    фотка+инфа
                </div>
            </div>
            <div class="col-xs-6 col-sm-4 col-md-3">
                <div class="topEliquids">
                    фотка+инфа
                </div>
            </div>
            <div class="col-xs-6 col-sm-4 col-md-3">
                <div class="topEliquids">
                    фотка+инфа
                </div>
            </div>
        </div>
    </div>


{% endblock %}

{% block SideBar %}
     <div class="">
         <ul class="list-unstyled category">
             {% for category in categories %}
                 <li class="sideCategory">
                     <a class="categoryColor" href="{{ category.short_name }}/?page=1">{{ category.name }}</a>
                 </li>
             {% endfor %}
         </ul>
     </div>

{% endblock %}