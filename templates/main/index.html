{% extends "base.html" %}

{% load staticfiles %}

{% block references %}
    {{ block.super }}
    <link rel="stylesheet" type="text/css" href="{% static "components/slick/slick.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "components/slick/slick-theme.css" %}">
    <link rel="stylesheet" href="{% static "css/index.css" %}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css" rel="stylesheet"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script>

    <script src="{% static "components/slick/slick.js" %}" type="text/javascript" charset="utf-8"></script>
    <script src="{% static "js/slider.js" %}" type="text/javascript"></script>
    <script>
        function format(response) {
            if (response.loading) return response.text;

            var markup = response.name;
            response.parameters.forEach(function (item) {
                markup += '<div> '+ item.name + ':'+ item.value +'</div>'
            });

            return markup;
        }

        function formatSelection(response) {
            return response.name || response.text;
        }

        $(document).ready(function () {

            $(".js-data-example-ajax").select2({
                ajax: {
                    url: "/main/test_ajax/",
                    dataType: 'json',
                    delay: 250,
                    data: function (params) {
                        return {
                            q: params.term // search term
                        };
                    },
                    processResults: function (data, page) {
                        // parse the results into the format expected by Select2.
                        // since we are using custom formatting functions we do not need to
                        // alter the remote JSON data
                        //alert(data.items);
                        return {
                            results: data.items
                        };
                    },
                    cache: true
                },
                escapeMarkup: function (markup) {
                    return markup;
                }, // let our custom formatter work
                minimumInputLength: 1,
                templateResult: format, // omitted for brevity, see the source of this page
                templateSelection: formatSelection // omitted for brevity, see the source of this page

            });
        });
    </script>
{% endblock %}

{% block content %}
    <div class="container-fluid">
        <div class="row main-content">
            <div class="col-sm-2">
                <div class="field categories">
                    <ul>
                        {% for category in categories %}
                            <li>
                                <a href="{{ category.short_name }}/?page=1">{{ category.name }}</a>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
                <div class="field locate"><a href="/accounts/add_offer">Разместить объявление</a></div>
            </div>
            <div class="col-sm-8">
                <section class="fade-slick slider">
                    <div>
                        <img src="http://placehold.it/250x200?text=1">
                    </div>
                    <div>
                        <img src="http://placehold.it/450x300?text=2">
                    </div>
                    <div>
                        <img src="http://placehold.it/450x300?text=3">
                    </div>
                    <div>
                        <img src="http://placehold.it/450x300?text=4">
                    </div>
                    <div>
                        <img src="http://placehold.it/450x300?text=5">
                    </div>
                    <div>
                        <img src="http://placehold.it/450x300?text=6">
                    </div>
                </section>
            </div>
            <div class="col-sm-2">
                <div class="field support">
                    FAQ<br>Support<br>About<br>Twitter
                </div>
            </div>
        </div>
    </div>
    <p id="pop" align="center">Popular</p>
    <section class="regular slider">
        <div>
            <img src="http://placehold.it/350x300?text=1">
        </div>
        <div>
            <img src="http://placehold.it/350x300?text=2">
        </div>
        <div>
            <img src="http://placehold.it/350x300?text=3">
        </div>
        <div>
            <img src="http://placehold.it/350x300?text=4">
        </div>
        <div>
            <img src="http://placehold.it/350x300?text=5">
        </div>
        <div>
            <img src="http://placehold.it/350x300?text=6">
        </div>
    </section>


    <select class="js-data-example-ajax" style="width:100%">
        <option value="3620194" selected="selected">Select a value......</option>
    </select>
{% endblock %}